<!DOCTYPE html>
<html>
    <head>
    <script src="//code.jquery.com/jquery-1.12.0.min.js"></script>
    <script src="//code.jquery.com/jquery-migrate-1.2.1.min.js"></script>
    <script   src="https://code.jquery.com/jquery-1.12.2.min.js"   integrity="sha256-lZFHibXzMHo3GGeehn1hudTAP3Sc0uKXBXAzHX1sjtk="   crossorigin="anonymous"></script>
    </head>
<body>

<p>Locate </p>

<button onclick="getLocation()" id ='loc'> Tell Me</button>

<p id="demo"></p>

<script>
var x = document.getElementById("demo");

function getLocation() {
    if (navigator.geolocation) {
        navigator.geolocation.watchPosition(showPosition);
    } 
    else 
    { 
        x.innerHTML = "Geolocation is not supported by this browser.";}
    }
    
function showPosition(position) {
    var lat = position.coords.latitude;
    var lon = position.coords.longitude;
    x.innerHTML="Latitude: " + lat + "<br>Longitude: " + lon;	
    console.log("scott");

    var xhr = new XMLHttpRequest();
    var params = "latitude=" + lat + "&longitude=" + lon;
    console.log("Params: " + params);
    xhr.open('PUT', 'http://localhost:25303/locations', true);
    xhr.setRequestHeader('Content-type', 'application/x-www-form-urlencoded');
    xhr.onreadystatechange = function () {
        // do something to response
        console.log("Response:" & this.responseText);
    };
    xhr.send(params);


  /*  var data = new FormData();
    data.append('latitude', lat);
    data.append('longitude', lon);

    var xhr = new XMLHttpRequest();
    xhr.open('PUT', 'http://localhost:25303/locations', true);
    xhr.onload = function () {
        console.log(this.responseText);
    };
    xhr.send(data);
    */


    /* $.ajax({ 
        url: 'http://localhost:25303/locations',
        method: 'PUT',
        mimeType: "multipart/form-data",
        data:"latitude=" & lat & "&longitude=" & lon,
        success:function(data, textStatus,xhr){ console.log(data);},
        error:function(xhr,textStatus,errorThrown){console.log('bad PUT');}
   }); */
   
}
</script>

</body>
</html>
